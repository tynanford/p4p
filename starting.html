<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quick Start &#8212; P4P 0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="P4P 0 documentation" href="index.html" />
    <link rel="next" title="Overview" href="overview.html" />
    <link rel="prev" title="PVAccess for Python (P4P)" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PVAccess for Python (P4P)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">P4P 0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="quick-start">
<span id="starting"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>For testing and evaluation, it is recommended to install from pypi.org into a (disposable) virtualenv.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">virtualenv</span> <span class="n">p4ptest</span>
<span class="o">.</span> <span class="n">p4ptest</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pip</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">p4p</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">nose</span> <span class="n">p4p</span>   <span class="c1"># Optional: runs automatic tests</span>
</pre></div>
</div>
<p>With this complete, open three terminal instances.
One to run a PVA client, and two more to run PVA clients.
In the first run a PVA server.  Feel free to replace &#8216;my:pv:name&#8217;
with an arbitrary name string everywhere it occurs.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ . p4ptest/bin/activate
$ python -m p4p.server.cli my:pv:name=int
...
INFO:p4p.server:Running server
</pre></div>
</div>
<p>In a second terminal run the following. If successful, the last line will end with a zero value.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ . p4ptest/bin/activate
$ python -m p4p.client.cli monitor my:pv:name
...
my:pv:name Mon Jul  9 19:24:01 2018 0L
</pre></div>
</div>
<p>And finally, in a third terminal run the following.  If successful, the second terminal should show the new value.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ . p4ptest/bin/activate
$ python -m p4p.client.cli put my:pv:name=5
my:pv:name=5
</pre></div>
</div>
<p>Alternately, using the <a class="reference internal" href="client.html#clientapi"><span class="std std-ref">Client API</span></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">p4p.client.thread</span> <span class="k">import</span> <span class="n">Context</span>
<span class="n">ctxt</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s1">&#39;pva&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ctxt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;my:pv:name&#39;</span><span class="p">))</span>
<span class="n">ctxt</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;my:pv:name&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ctxt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;my:pv:name&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="troubleshooting-network-issues">
<h2>Troubleshooting network issues<a class="headerlink" href="#troubleshooting-network-issues" title="Permalink to this headline">¶</a></h2>
<p>If the preceeding didn&#8217;t work as described, there is likely a networking problem.
Restart both server and client with an added argument &#8216;-d&#8217;.
Look for lines like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span><span class="n">T17</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">44.164</span> <span class="n">Broadcast</span> <span class="n">address</span> <span class="c1">#0: 10.65.15.255:5076. (not unicast)</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">27</span><span class="n">T17</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">44.164</span> <span class="n">Broadcast</span> <span class="n">address</span> <span class="c1">#1: 192.168.210.255:5076. (not unicast)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>This indicates the two network interfaces were discovered on this host.
Localhost is not included by default.
If no interfaces are found, then check the system network configuration.
If interfaces are found, ensure that no firewalls are applied.</p>
<p>By default, both client and server must share at least one discovered
local broadcast address.</p>
<p>Non-default configuration involves the use of the $EPICS_PVA_ADDR_LIST
environment variable, or configuration options specifically passed
to conf= <a class="reference internal" href="client.html#p4p.client.thread.Context" title="p4p.client.thread.Context"><code class="xref any py py-class docutils literal"><span class="pre">p4p.client.thread.Context()</span></code></a>.  This is considered beyond the
scope of a &#8220;quick start&#8221;.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Quick Start</a><ul>
<li><a class="reference internal" href="#troubleshooting-network-issues">Troubleshooting network issues</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">PVAccess for Python (P4P)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="overview.html"
                        title="next chapter">Overview</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/starting.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PVAccess for Python (P4P)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">P4P 0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Michael Davidsaver.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9.
    </div>
  </body>
</html>